services:
  # Web service for the .NET API
  - type: web
    name: IconIK-api
    runtime: docker
    plan: free
    dockerfilePath: ./backend/IconIK.API/Dockerfile
    dockerContext: .
    autoDeploy: true
    envVars:
      - key: ASPNETCORE_ENVIRONMENT
        value: Production
      - key: DATABASE_URL
        value: postgresql://iconik:TsJdy3RZ5hRi56b78LE8b20uJdR37RRo@dpg-d46uala4d50c7394inlg-a.frankfurt-postgres.render.com/iconikdb
      - key: JWT_SECRET_KEY
        generateValue: true
      - key: JWT_ISSUER
        value: IconIKIK
      - key: JWT_AUDIENCE
        value: IconIKIK-Users
      - key: FRONTEND_URL
        value: http://localhost:3000
      - key: ADDITIONAL_CORS_ORIGINS
        value: https://localhost:3001

# PostgreSQL database - Commented out (already created manually)
# databases:
#   - name: IconIK-db
#     databaseName: iconikdb
#     user: iconik
#     plan: free