# 🚀 Deployment Checklist

## Render.com (Backend)

### ✅ Environment Variables
```bash
DATABASE_URL=postgresql://user:password@host:5432/dbname  # Otomatik eklenir
JWT_SECRET_KEY=your-secret-key-min-32-characters
FRONTEND_URL=https://YOUR-VERCEL-URL.vercel.app
ADDITIONAL_CORS_ORIGINS=https://hr-management-v3.vercel.app
```

### ✅ Build & Start Commands
```bash
# Build Command
dotnet publish -c Release -o out

# Start Command
cd out && dotnet IconIK.API.dll
```

### ✅ Health Check
- Backend URL: https://IconIK-api.onrender.com
- Test endpoint: https://IconIK-api.onrender.com/api/health
- Swagger: https://IconIK-api.onrender.com/swagger

---

## Vercel (Frontend)

### ✅ Environment Variables
```bash
NEXT_PUBLIC_API_BASE_URL=https://IconIK-api.onrender.com/api
NEXT_PUBLIC_FILE_BASE_URL=https://IconIK-api.onrender.com
```

### ✅ Build Settings
- Framework Preset: Next.js
- Build Command: `cd frontend && npm run build`
- Output Directory: `frontend/.next`
- Install Command: `cd frontend && npm install`

### ✅ Root Directory
- Root Directory: `.` (project root)

---

## 🐛 Troubleshooting

### CORS Hatası
1. Render.com'da `FRONTEND_URL` veya `ADDITIONAL_CORS_ORIGINS` eklenmiş mi?
2. Backend yeniden deploy edilmiş mi?
3. Vercel URL tam ve doğru mu? (https:// ile başlamalı)

### 502 Bad Gateway
1. Render.com backend çalışıyor mu? (Dashboard'da "Live" durumunda mı?)
2. Database bağlantısı var mı? (Logs'da connection error var mı?)
3. Cold start süresi (ilk istek 30-60 saniye sürebilir)

### Login Çalışmıyor
1. Network tab'de API istekleri gidiyor mu?
2. CORS hatası var mı?
3. JWT_SECRET_KEY Render'da ayarlanmış mı?

### Dosya Upload Çalışmıyor
1. Render.com free tier geçici dosya sistemi kullanır
2. Dosyalar ephemeral - deploy sonrası silinir
3. Production için AWS S3 veya Cloudinary kullanın

---

## 📊 Monitoring

### Render.com Logs
```bash
# Render Dashboard > Logs sekmesi
# Real-time backend logs görüntülenebilir
```

### Vercel Logs
```bash
# Vercel Dashboard > Deployments > [Deployment] > Runtime Logs
# Frontend runtime ve build logs
```

---

## 🔄 Quick Redeploy

### Backend (Render)
1. Dashboard'da "Manual Deploy" butonuna tıklayın
2. Veya git push ile otomatik deploy

### Frontend (Vercel)
1. Otomatik: Git push yapar yapmaz deploy olur
2. Manuel: Dashboard'da "Redeploy" butonuna tıklayın

---

## 🌐 Production URLs

- **Frontend**: https://YOUR-PROJECT.vercel.app
- **Backend API**: https://IconIK-api.onrender.com
- **Database**: PostgreSQL on Render.com (internal)

---

## 🔐 Security Notes

1. **NEVER** commit `.env` files with production credentials
2. JWT_SECRET_KEY must be strong (32+ characters)
3. Database credentials are auto-generated by Render
4. Use environment variables for all secrets
5. CORS is restricted to specific origins (no wildcards in production)
